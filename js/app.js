// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var $toggle, $video, aspect, getHeight, getRatio, getWidth, init, setBodySize, setVideoSize, sidebarOpened, tap, toggleSidebar, tooTall;
    aspect = {
      width: 16,
      height: 9
    };
    tap = 'click touchend';
    init = function() {
      setBodySize();
      return setVideoSize();
    };
    getRatio = function() {
      return aspect.width / aspect.height;
    };
    getHeight = function(w) {
      return w / getRatio();
    };
    getWidth = function(h) {
      return h * getRatio();
    };
    tooTall = function(h) {
      return (h <= window.innerHeight) != null;
    };
    sidebarOpened = function() {
      return $('body').hasClass('sidebar-open') === true;
    };
    setVideoSize = function() {
      var height, video;
      video = $('video');
      height = getHeight(video.width());
      if (!sidebarOpened()) {
        height = window.innerHeight;
      }
      return setTimeout(function() {
        return video.height(height);
      }, 1);
    };
    toggleSidebar = function(e) {
      var $body;
      if (e != null) {
        e.preventDefault();
      }
      return $body = $('body').toggleClass('sidebar-open');
    };
    setBodySize = function() {
      return $('body').height(window.innerHeight).width(window.innerWidth);
    };
    $toggle = $('#toggle-sidebar').on(tap, function(e) {
      e.preventDefault();
      toggleSidebar();
      return setVideoSize();
    });
    $video = $('#video').on(tap, function(e) {
      e.preventDefault();
      if (this.paused || this.ended) {
        this.play();
      }
      if (!sidebarOpened()) {
        toggleSidebar();
      }
      return setVideoSize();
    });
    init();
  });

}).call(this);
